sudo: false
language: java
script: mvn clean package
dist: trusty
jdk: [oraclejdk11]
branches:
  only: [nutzam/nutz-1587-origin]
before_script: [psql -c 'create database nutztest;' -U postgres, cp ./tools/travis-ci/nutz-test.properties
    ./test/, cp ./tools/travis-ci/log4j.properties ./test/]
notifications: {email: false}
before_install: [export TZ=Asia/Shanghai]
env:
  global:
  - {secure: E1z+6z9M4iTdAXZ2a1rYSrxfIOq6PkdXEMutAbIn/bp1e/Qvb5IVoAS0heo7SPwcIlHlN8mDiOtKdzbcu9q8VaftfHwFjff6AoKyuWtfDqE1ecTfflebWwzmtXKJmT5uxBPvu442dS4sIc2zx3zjvnxMsSmvrdSwbMxwdbAKvDc=}
  - SONATYPE_USERNAME=wendal
  - {secure: BaXmGpodQiuU23YgtUThWCHf7Vig2Gv3UfpBjo3FATgn1LRF3i2IOgY5sCSi+XJYqx+05fVNdwVYccxS/9UfhPNSqQuslIwgmg0y9f26DYaX2gaW+jk8padhZRkeBrY3fO+g9nQuu+Epgqi0ITru6+IjH932O0m1JR7iJu2RNhs=}
deploy:
  provider: script
  script: mvn -Dmaven.test.skip=true clean package source:jar deploy --settings mvn_settings.xml
  skip_cleanup: true
  true: {tags: false, branch: master}
addons: {postgresql: '9.3'}
cache:
  directories: [$HOME/.m2]
